<router-outlet name="menu"></router-outlet>
<div *ngIf="loading">
    <app-loading></app-loading>
</div>
<div class="container-fluid">
    <h1 class="row col">Consulta registro original</h1>
    <hr class="red">
    <div class="message-container">
        <app-alert id="dvMessage" [mostrar]="this.mostrarAlerta" [message]="this.mensajeAlerta" [type]="this.tipoAlerta"
            (mostrando)="this.mostrarAlerta=$event"></app-alert>
    </div>
    <div class="clearfix">
        <div class="float-left">
            <label for="tipoCuerpoAgua">Tipo de Cuerpo de Agua Original:</label>
            <select class="form-control" [(ngModel)]="tipoCuerpoAgua" (change)="FiltrarCuerpoAgua()"
                name="tipoCuerpoAgua" title="Seleccione el tipo cuerpo de agua">
                <option [ngValue]="-1" selected>--Seleccione--</option>
                <option [ngValue]="0">Todos</option>
                <option *ngFor="let nombre of cuerpoAgua" [ngValue]="nombre.id">
                    {{nombre.descripcion}}
                </option>
            </select>
        </div>
        <div class="float-right">
            <button class="btn btn-secondary mr-1" type="button" (click)="exportarResultados()">
                <img width="20px" src="./assets/images/site/ionoexel.png" alt="icono de excel" />
                Descargar informaci&oacute;n
            </button>
            <button class="btn btn-secondary" type="button" (click)="this.limpiarFiltros()">
                <i class="bi bi-funnel"></i>
                Limpiar filtros
            </button>
        </div>
    </div>
    <br />
    <div class="alert alert-secondary" role="alert"
        *ngIf="this.selectAllOption && !this.allSelected && this.totalItems > this.NoPage ">
        Los {{this.muestreos.length}} registros de esta página están seleccionados. <button type="button"
            (click)="onSelectAllPagesClick()" class="btn btn-link">
            Seleccionar los {{this.totalItems}} registros
        </button>
    </div>
    <div class="alert alert-secondary" role="alert" *ngIf="this.allSelected">
        Los {{this.totalItems}} registros están seleccionados. <button type="button" class="btn btn-link"
            (click)="onUnselectAllClick()">
            Anular la seleccion
        </button>
    </div>
    <div class="table-responsive dvTable">
        <table style="font-size:x-small" class="table table-bordered">
            <thead class="thead-light">
                <tr>
                    <th style="text-align:center" class="checkBox-center">
                        <label for="chckAll">SELECCIONAR TODOS</label>
                        <input type="checkbox" id="chckAll" [(ngModel)]="this.selectedPage"
                            (change)="onSelectPageClick(this.muestreos, this.muestreosSeleccionados);" />
                    </th>
                    <ng-container *ngFor="let columna of this.columnas">
                        <th *ngIf="mostrarColumna(columna.etiqueta)">
                            {{columna.etiqueta}}
                        </th>
                    </ng-container>
                </tr>
            </thead>
            <tbody>
                <tr
                    *ngFor="let muestreo of this.muestreos| paginate: { itemsPerPage:pageSize, currentPage: page, totalItems: totalItems };">
                    <td style="text-align:center" class="checkBox-center">
                        <input type="checkbox" (change)="onSelectClick(muestreo);" [(ngModel)]="muestreo.selected"
                            title="Seleccionar">
                    </td>
                    <td *ngIf="perfil == 'ADMINISTRADOR' || perfil == 'SECAIA 1' || perfil == 'SECAIA 2'">
                        <!--{{muestreo.noEntregaOCDL}}-->
                      1
                    </td>
                  <td>NO</td>
                    <td>{{muestreo.claveSitioOriginal}}</td>
                    <td>{{muestreo.claveSitio}}</td>
                    <td>{{muestreo.claveMonitoreo}}</td>
                    <td>{{muestreo.fechaRealizacion}}</td>
                    <td>{{muestreo.laboratorio}}</td>
                    <td> {{muestreo.tipoCuerpoAgua}}</td>
                    <td>{{muestreo.tipoHomologado}}</td>
                    <td>{{muestreo.tipoSitio}}</td>
                    <ng-container *ngFor="let parametro of parametrosTotales">
                        <td>{{getValueParam(parametro.claveParametro, muestreo.parametros)}}</td>
                    </ng-container>
                </tr>
                <tr *ngIf="this.muestreos.length==0">
                    <td class="td-center" colspan="650">No se encontraron registros</td>
                </tr>
            </tbody>
        </table>
    </div>
    <pagination-controls (pageChange)="onPageClick($event)" previousLabel="Anterior" nextLabel="Siguiente">
    </pagination-controls>
</div>
