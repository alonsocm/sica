<router-outlet name="menu"></router-outlet>
<div *ngIf="loading">
  <app-loading></app-loading>
</div>
<div class="container-fluid">
  <h1>Incidencias de resultados en etapa de reglas de resultados</h1>
  <hr class="red">
  <div class="message-container">
    <app-notification></app-notification>
  </div>
  <div class="clearfix">
    <div class="float-lefth col-md-3">
      <app-busqueda-columna [esHistorialValor]="this.esHistorial" (mostrandocabecero)="this.cabeceroSeleccionado=$event"
                            (mostrandoesfiltrofoco)="this.esfiltrofoco=$event" [headerList]="this.headers">
      </app-busqueda-columna>
    </div>
    <div class="float-right">
      <button class="btn btn-primary btn-sm mr-1" type="button"
              (click)="this.resetCorreo(this.ReplicaLaboratorioExterno);">
        <i class="bi bi-envelope"></i>&nbsp;Enviar correo a laboratorio externo
      </button>
      <input type="file" class="element-hidden" (change)="cargarArchivo($event, this.ReplicaLaboratorioExterno)" accept=".xls, .xlsx"
             title="Seleccionar archivo" #inputExcelLaboratorio>
      <input type="file" class="element-hidden" (change)="cargarArchivo($event, this.ReplicaSrenameca)" accept=".xls, .xlsx"
             title="Seleccionar archivo" #inputExcelSRENAMECA>

      <input type="file" class="element-hidden" (change)="cargarArchivo($event, this.ReplicaAprobacion)" accept=".xls, .xlsx"
             title="Seleccionar archivo" #inputExcelAprobacionRechazo>

      <button type="button" class="btn btn-primary btn-sm mr-1" (click)="inputExcelLaboratorio.click()"
              title="Seleccionar archivo">

        <i class="bi bi-cloud-upload"></i>
        Carga réplicas laboratorio externo
      </button>

      <input type="file" class="element-hidden" (change)="cargarEvidencias($event)"
             accept=".xls, .xlsx, .jpg, .pdf, .xlsm" multiple title="Seleccionar archivos" #fileUpload>
      <button type="button" class="btn btn-primary btn-sm mr-1" (click)="fileUpload.click()">
        <i class="bi bi-cloud-upload"></i>
        Seleccionar y cargar evidencias
      </button>
      <button type="button" class="btn btn-secondary btn-sm mr-1" (click)="descargarEvidencias()">
        <i class="bi bi-file-zip"></i>
        Descargar evidencias
      </button>
    </div>
  </div>
  <div class="clearfix">
    <div class="float-right col-md-12">
      <div class="float-right">
        <button class="btn btn-primary btn-sm mr-1" type="button" (click)="this.resetCorreo(this.ReplicaSrenameca);">
          <i class="bi bi-envelope"></i>&nbsp;Enviar correo a SRENAMECA
        </button>
        <button type="button" class="btn btn-primary btn-sm mr-1" (click)="inputExcelSRENAMECA.click()"
                title="Seleccionar archivo">
          <i class="bi bi-cloud-upload"></i>
          Carga archivo validación SRENAMECA
        </button>
        <button type="button" class="btn btn-primary btn-sm mr-1" (click)="inputExcelAprobacionRechazo.click()"
                title="Seleccionar archivo">
          <i class="bi bi-cloud-upload"></i>
          Aprobación-Rechazo de resulado por archivo
        </button>
        <button class="btn btn-primary btn-sm mr-1" type="button" (click)="enviarResumen()">
          <i class="bi bi-send"></i>&nbsp;Enviar a resumen de reglas
        </button>

        <button class="btn btn-secondary btn-sm mr-1" type="button" (click)="exportarResultados();">
          <i class="bi bi-cloud-download"></i> Descargar informaci&oacute;n
        </button>
        <button class="btn btn-secondary btn-sm" (click)="this.onLimpiarFiltrosClick()">
          <i class="bi bi-funnel"></i>
          Limpiar filtros
        </button>
      </div>
    </div>
  </div>
  <app-historial></app-historial>
  <div class="alert alert-secondary" role="alert"
       *ngIf="this.selectAllOption && !this.allSelected && this.totalItems > this.NoPage ">
    Los {{this.replicasResultados.length}} registros de esta página están seleccionados.
    <button type="button"
            (click)="onSelectAllPagesClick()" class="btn btn-link">
      Seleccionar los {{this.totalItems}} registros
    </button>
  </div>
  <div class="alert alert-secondary" role="alert" *ngIf="this.allSelected">
    Los {{this.totalItems}} registros están seleccionados. <button type="button" class="btn btn-link"
                                                                   (click)="onUnselectAllClick()">
      Anular la seleccion
    </button>
  </div>
  <div style="margin-top:5px" class="dvTable">
    <table class="table-bordered table-hover">
      <thead class="thead-sticky">
        <tr>
          <th columnResize class="td-center no-border-bottom th-resize">
            &nbsp;SELECCIONAR&nbsp;
          </th>
          <th  scope="col" *ngFor="let columna of this.columns let i = index" id="{{columna.name}}"
              class="no-border-bottom sticky-col"
              [ngStyle]="{ 'backgroundColor': (esfiltrofoco == this.columna.name && !this.cabeceroSeleccionado) || (this.columna.label.indexOf(esfiltrofoco) != -1 && this.esfiltrofoco != '' && !this.cabeceroSeleccionado )  ? 'lightblue' : ( (cabeceroSeleccionado && esfiltrofoco == this.columna.name ) ? 'yellow' : columna.color), 'z-index': '0',
              'width.px':columna.width, 'max-width.px':columna.width, 'min-width.px':columna.width }">
            {{columna.label}}
          </th>

          <!--<th [ngClass]="{'pinned-no-border-top sticky-col': columna.pinned, 'no-border-top': !columna.pinned}"
              id="filter-{{columna.name}}"
              [ngStyle]="{'left.px': columna.pinned?columna.startAt:'', 'width.px':columna.pinned?columna.width:'', 'max-width.px':columna.pinned?columna.width:'', 'min-width.px':columna.pinned?columna.width:''}">-->

            <th class="td-center no-border-bottom th-resize">Avance de estatus</th>
                    <th *ngFor="let columna of this.columnsAvance let i = index" scope="col" id="{{columna.name}}"
                        class="no-border-bottom sticky-col"
                        [ngStyle]="{ 'backgroundColor': columna.color, 'z-index': '0',
          'width.px':columna.width,'max-width.px':columna.width, 'min-width.px':columna.width}">
                      {{columna.label}}
                    </th>
        </tr>
        <tr>
          <th class="no-border-top td-center">
            <input class="cursor-pointer" type="checkbox" id="chckAll" [(ngModel)]="this.selectedPage"
                   (change)="onSelectPageClick(this.replicasResultados,this.resultadosFiltrados);"
                   title="Selecciona la página actual" />
          </th>
          <th class="no-border-top" *ngFor="let columna of this.columns let i = index" id="filter-{{columna.name}}">
            <div class="dropdown" style="width:max-content" id="dd-{{columna.name}}">
              <button id="dLabel" style="border:none; text-align:right" data-toggle="dropdown" aria-haspopup="true"
                      title="Filtros" aria-expanded="false" (click)="onFilterIconClick(columna)">
                <i *ngIf="!columna.filtered && !(this.orderBy.column === columna.name)"
                   class="bi bi-caret-down-fill"></i>
                <i *ngIf="columna.filtered" class="bi bi-funnel-fill"></i>
                <i [(ngModel)]="columna.asc" *ngIf="this.orderBy.column === columna.name && this.orderBy.type === 'asc'"
                   class="bi bi-arrow-down"></i>
                <i [(ngModel)]="columna.desc"
                   *ngIf="this.orderBy.column === columna.name && this.orderBy.type === 'desc'"
                   class="bi bi-arrow-up"></i>
              </button>

              <div class="dropdown-menu" style="width:250px;" id="dd-menu-{{columna.name}}">

                <a (click)="sort(columna.name, 'asc');" class="dropdown-item">
                  <i [ngStyle]="{'background-color':(this.orderBy.column === columna.name && this.orderBy.type === 'asc') ? 'lightgreen' : 'white'}"
                     class="bi bi-sort-alpha-down"></i>
                  Ordenar de A a Z
                </a>
                <a (click)="sort(columna.name, 'desc');" class="dropdown-item">
                  <i [ngStyle]="{'background-color':(this.orderBy.column === columna.name && this.orderBy.type === 'desc') ? 'lightgreen' : 'white'}"
                     class="bi bi-sort-alpha-down-alt"></i>
                  Ordenar de Z a A
                </a>
                <hr class="dropdown-divider">
                <a (click)="onDeleteFilterClick(columna.name)" class="dropdown-item">
                  <i [ngStyle]="{color:(columna.filtered) ? 'red' : 'black'}" class="bi bi-funnel-fill"></i> <i style="padding:0px" class="bi bi-x"></i> Eliminar filtro de {{columna.label}}
                </a>
                <a class="dropdown-item dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                   aria-expanded="true" (click)="onSpecialFiltersClick($event, columna.name)">
                  <i *ngIf="columna.optionFilter!=null && columna.optionFilter!='' && columna.optionFilter != this.filtroEspecialEquals"
                     style="color: palegreen" class="bi bi-check-square-fill"></i>

                  {{leyendaFiltrosEspeciales}}
                </a>
                <div id="filters-{{columna.name}}" class="d-none">
                  <a *ngFor="let nombre of this.opcionesFiltros; let indice=index"
                     (click)="mostrarModalFiltro(nombre, columna);" class="dropdown-item" data-toggle="modal"
                     data-target="#mdlFiltro">
                    <i id="imgFiltroEspecializado"
                       *ngIf="(nombre == this.filtroEspecializado && columna.optionFilter != null && columna.secondOptionFilter != '') || nombre === columna.optionFilter && columna.optionFilter != this.filtroEspecialEquals && columna.secondOptionFilter ==''"
                       class="bi bi-check-lg"></i>
                    {{nombre}} ...
                    <div *ngIf="this.indicesopcionesFiltros.includes(indice)" class="dropdown-divider"></div>
                  </a>
                </div>
                <div class="dropdown-divider"></div>
                <div style="height:300px; overflow:scroll; padding:5px">
                  <input class="form-control" placeholder="Buscar" type="text"
                         (input)="onFiltroCabecero($event, columna)" />
                  <input type="checkbox" id="chckAllFiltro{{columna.name}}" [(ngModel)]="columna.selectAll"
                         (change)="seleccionarAllFiltro(columna);" />
                  <label style="font-size:x-small;" (click)="$event.stopPropagation()"
                         for="chckAllFiltro{{columna.name}}">
                    Seleccionar
                    todos
                  </label>
                  <div style="height:min-content" *ngFor="let dato of columna.filteredData; index as i">
                    <input type="checkbox" id={{columna.name+i}} [(ngModel)]="dato.checked" class="check chkdata" />
                    <label for="{{columna.name+i}}" style="font-size:xx-small; display: inline;"
                           (click)="$event.stopPropagation()">&nbsp;{{dato.value}}</label>
                  </div>
                </div>
                <div class="modal-footer" style="font-size:xx-small;">
                  <button id="btnCancelarFiltro" type="button" style="font-size:xx-small"
                          class="btn btn-secondary btn-sm" data-dismiss="dropdown" (click)="onCancelarFiltroClick()">
                    Cancelar
                  </button>
                  <button type="button" class="btn btn-primary btn-sm" style="font-size:xx-small"
                          data-dismiss="dropdown" (click)="filtrar(columna,false);">
                    Aceptar
                  </button>
                </div>
              </div>
            </div>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let replica of this.replicasResultados | paginate: { itemsPerPage:NoPage, currentPage: page, totalItems: totalItems} let i = index">
          <td class="td-center">
            <input type="checkbox" class="cursor-pointer" [(ngModel)]="replica.selected"
                   (change)="onSelectClick(replica)" title="Seleccionar">
          </td>
          <td style="text-align:center">{{replica.numeroCarga}}</td>
          <td>{{replica.claveUnica}}</td>
          <td>{{replica.claveSitio}}</td>
          <td>{{replica.claveMonitoreo}}</td>
          <td>{{replica.nombre}}</td>
          <td>{{replica.claveParametro}}</td>
          <td></td>
          <td>{{replica.tipoCuerpoAgua}}</td>
          <td>{{replica.tipoHomologado}}</td>
          <td>{{replica.resultado}}</td>
          <td style="text-align:center">{{replica.correctoResultadoReglaValidacion ? "SI" : "NO"}} </td>
          <td>{{replica.observacionReglaValidacion}}</td>
          <td style="text-align:center">{{ (replica.aceptaRechazo != null) ? ((replica.aceptaRechazo) ? "SI" : "NO") : replica.aceptaRechazo }}</td>
          <td>{{replica.resultadoReplica}}</td>
          <td style="text-align:center">{{ (replica.mismoResultado != null) ? ((replica.mismoResultado) ? "SI" : "NO") : replica.mismoResultado }}</td>
          <td>{{replica.observacionLaboratorio}}</td>
          <td>{{replica.fechaReplicaLaboratorio|date: 'dd/MM/yyyy'}}</td>
          <td>{{replica.observacionSrenameca}}</td>
          <td style="text-align:center">{{ (replica.esDatoCorrectoSrenameca != null) ? ((replica.esDatoCorrectoSrenameca) ? "SI" : "NO") : replica.esDatoCorrectoSrenameca }}</td>
          <td>{{replica.fechaObservacionSrenameca|date: 'dd/MM/yyyy'}} </td>
          <td style="text-align:center">OK</td>
          <td style="text-align:center">{{ (replica.apruebaResultadoReplica != null) ? ((replica.apruebaResultadoReplica) ? "SI" : "NO") : replica.apruebaResultadoReplica }}</td>
          <td>{{replica.fechaEstatusFinal|date: 'dd/MM/yyyy'}}</td>
          <td>{{replica.usuarioReviso}}</td>
          <td>{{replica.nombreEstatus}}</td>
          <td>{{replica.nombreEvidencias}}</td>
          <ng-container>
            <td style="text-align:center" *ngIf="replica.evidencias.length > 0 else elseBlock">
              <div *ngIf="replica.evidencias.length > 1 else elseSufijoBlock">
                <a class="cursor-pointer" (click)="onPreviewOrDownloadFileClick()"
                   title="Click para descargar">
                  <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-file-earmark-zip-fill" viewBox="0 0 16 16">
                    <path d="M5.5 9.438V8.5h1v.938a1 1 0 0 0 .03.243l.4 1.598-.93.62-.93-.62.4-1.598a1 1 0 0 0 .03-.243" />
                    <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1m-4-.5V2h-1V1H6v1h1v1H6v1h1v1H6v1h1v1H5.5V6h-1V5h1V4h-1V3zm0 4.5h1a1 1 0 0 1 1 1v.938l.4 1.599a1 1 0 0 1-.416 1.074l-.93.62a1 1 0 0 1-1.109 0l-.93-.62a1 1 0 0 1-.415-1.074l.4-1.599V8.5a1 1 0 0 1 1-1" />
                  </svg>
                </a>
              </div>
              <ng-template #elseSufijoBlock>
                <div [ngSwitch]="replica.evidencias[0].sufijo">
                  <div *ngSwitchCase="'.png'">
                    <a class="cursor-pointer" (click)="onPreviewOrDownloadFileClick()"
                       title="Click para vista previa">
                      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="30" fill="currentColor"
                           class="bi bi-file-earmark-image" viewBox="0 0 16 16">
                        <path d="M6.502 7a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3" />
                        <path d="M14 14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zM4 1a1 1 0 0 0-1 1v10l2.224-2.224a.5.5 0 0 1 .61-.075L8 11l2.157-3.02a.5.5 0 0 1 .76-.063L13 10V4.5h-2A1.5 1.5 0 0 1 9.5 3V1z" />
                      </svg>
                    </a>
                  </div>
                  <div *ngSwitchCase="'.jpg'">
                    <a class="cursor-pointer" (click)="onPreviewOrDownloadFileClick()"
                       title="Click para vista previa">
                      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="30" fill="currentColor"
                           class="bi bi-file-earmark-image" viewBox="0 0 16 16">
                        <path d="M6.502 7a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3" />
                        <path d="M14 14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zM4 1a1 1 0 0 0-1 1v10l2.224-2.224a.5.5 0 0 1 .61-.075L8 11l2.157-3.02a.5.5 0 0 1 .76-.063L13 10V4.5h-2A1.5 1.5 0 0 1 9.5 3V1z" />
                      </svg>
                    </a>
                  </div>
                  <div *ngSwitchCase="'.img'">
                    <a class="cursor-pointer" (click)="onPreviewOrDownloadFileClick()"
                       title="Click para vista previa">
                      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="30" fill="currentColor"
                           class="bi bi-file-earmark-image" viewBox="0 0 16 16">
                        <path d="M6.502 7a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3" />
                        <path d="M14 14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zM4 1a1 1 0 0 0-1 1v10l2.224-2.224a.5.5 0 0 1 .61-.075L8 11l2.157-3.02a.5.5 0 0 1 .76-.063L13 10V4.5h-2A1.5 1.5 0 0 1 9.5 3V1z" />
                      </svg>
                    </a>
                  </div>
                  <div *ngSwitchCase="'.xls'">
                    <a class="cursor-pointer" (click)="onPreviewOrDownloadFileClick()"
                       title="Click para descargar">
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor"
                           class="bi bi-filetype-xls" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                              d="M14 4.5V14a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5zM6.472 15.29a1.2 1.2 0 0 1-.111-.449h.765a.58.58 0 0 0 .254.384q.106.073.25.114.143.041.319.041.246 0 .413-.07a.56.56 0 0 0 .255-.193.5.5 0 0 0 .085-.29.39.39 0 0 0-.153-.326q-.152-.12-.462-.193l-.619-.143a1.7 1.7 0 0 1-.539-.214 1 1 0 0 1-.351-.367 1.1 1.1 0 0 1-.123-.524q0-.366.19-.639.19-.272.527-.422.338-.15.777-.149.457 0 .78.152.324.153.5.41.18.255.2.566h-.75a.56.56 0 0 0-.12-.258.6.6 0 0 0-.247-.181.9.9 0 0 0-.369-.068q-.325 0-.513.152a.47.47 0 0 0-.184.384q0 .18.143.3a1 1 0 0 0 .405.175l.62.143q.326.075.566.211a1 1 0 0 1 .375.358q.135.222.135.56 0 .37-.188.656a1.2 1.2 0 0 1-.539.439q-.351.158-.858.158-.381 0-.665-.09a1.4 1.4 0 0 1-.478-.252 1.1 1.1 0 0 1-.29-.375m-2.945-3.358h-.893L1.81 13.37h-.036l-.832-1.438h-.93l1.227 1.983L0 15.931h.861l.853-1.415h.035l.85 1.415h.908L2.253 13.94zm2.727 3.325H4.557v-3.325h-.79v4h2.487z" />
                      </svg>
                    </a>
                  </div>
                  <div *ngSwitchCase="'.xlsm'">
                    <a class="cursor-pointer" (click)="onPreviewOrDownloadFileClick()"
                       title="Click para descargar">
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor"
                           class="bi bi-filetype-xls" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                              d="M14 4.5V14a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5zM6.472 15.29a1.2 1.2 0 0 1-.111-.449h.765a.58.58 0 0 0 .254.384q.106.073.25.114.143.041.319.041.246 0 .413-.07a.56.56 0 0 0 .255-.193.5.5 0 0 0 .085-.29.39.39 0 0 0-.153-.326q-.152-.12-.462-.193l-.619-.143a1.7 1.7 0 0 1-.539-.214 1 1 0 0 1-.351-.367 1.1 1.1 0 0 1-.123-.524q0-.366.19-.639.19-.272.527-.422.338-.15.777-.149.457 0 .78.152.324.153.5.41.18.255.2.566h-.75a.56.56 0 0 0-.12-.258.6.6 0 0 0-.247-.181.9.9 0 0 0-.369-.068q-.325 0-.513.152a.47.47 0 0 0-.184.384q0 .18.143.3a1 1 0 0 0 .405.175l.62.143q.326.075.566.211a1 1 0 0 1 .375.358q.135.222.135.56 0 .37-.188.656a1.2 1.2 0 0 1-.539.439q-.351.158-.858.158-.381 0-.665-.09a1.4 1.4 0 0 1-.478-.252 1.1 1.1 0 0 1-.29-.375m-2.945-3.358h-.893L1.81 13.37h-.036l-.832-1.438h-.93l1.227 1.983L0 15.931h.861l.853-1.415h.035l.85 1.415h.908L2.253 13.94zm2.727 3.325H4.557v-3.325h-.79v4h2.487z" />
                      </svg>
                    </a>
                  </div>

                  <div *ngSwitchCase="'.xlsx'">
                    <a class="cursor-pointer" (click)="onPreviewOrDownloadFileClick()"
                       title="Click para descargar">
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-filetype-xlsx" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M14 4.5V11h-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5zM7.86 14.841a1.13 1.13 0 0 0 .401.823q.195.162.479.252.284.091.665.091.507 0 .858-.158.355-.158.54-.44a1.17 1.17 0 0 0 .187-.656q0-.336-.135-.56a1 1 0 0 0-.375-.357 2 2 0 0 0-.565-.21l-.621-.144a1 1 0 0 1-.405-.176.37.37 0 0 1-.143-.299q0-.234.184-.384.188-.152.513-.152.214 0 .37.068a.6.6 0 0 1 .245.181.56.56 0 0 1 .12.258h.75a1.1 1.1 0 0 0-.199-.566 1.2 1.2 0 0 0-.5-.41 1.8 1.8 0 0 0-.78-.152q-.44 0-.777.15-.336.149-.527.421-.19.273-.19.639 0 .302.123.524t.351.367q.229.143.54.213l.618.144q.31.073.462.193a.39.39 0 0 1 .153.326.5.5 0 0 1-.085.29.56.56 0 0 1-.255.193q-.168.07-.413.07-.176 0-.32-.04a.8.8 0 0 1-.249-.115.58.58 0 0 1-.255-.384zm-3.726-2.909h.893l-1.274 2.007 1.254 1.992h-.908l-.85-1.415h-.035l-.853 1.415H1.5l1.24-2.016-1.228-1.983h.931l.832 1.438h.036zm1.923 3.325h1.697v.674H5.266v-3.999h.791zm7.636-3.325h.893l-1.274 2.007 1.254 1.992h-.908l-.85-1.415h-.035l-.853 1.415h-.861l1.24-2.016-1.228-1.983h.931l.832 1.438h.036z" />
                      </svg>
                    </a>
                  </div>
                  <div *ngSwitchCase="'.pdf'">
                    <a class="cursor-pointer" (click)="onPreviewOrDownloadFileClick()"
                       title="Click para descargar">
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor"
                           class="bi bi-filetype-pdf" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                              d="M14 4.5V14a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5zM1.6 11.85H0v3.999h.791v-1.342h.803q.43 0 .732-.173.305-.175.463-.474a1.4 1.4 0 0 0 .161-.677q0-.375-.158-.677a1.2 1.2 0 0 0-.46-.477q-.3-.18-.732-.179m.545 1.333a.8.8 0 0 1-.085.38.57.57 0 0 1-.238.241.8.8 0 0 1-.375.082H.788V12.48h.66q.327 0 .512.181.185.183.185.522m1.217-1.333v3.999h1.46q.602 0 .998-.237a1.45 1.45 0 0 0 .595-.689q.196-.45.196-1.084 0-.63-.196-1.075a1.43 1.43 0 0 0-.589-.68q-.396-.234-1.005-.234zm.791.645h.563q.371 0 .609.152a.9.9 0 0 1 .354.454q.118.302.118.753a2.3 2.3 0 0 1-.068.592 1.1 1.1 0 0 1-.196.422.8.8 0 0 1-.334.252 1.3 1.3 0 0 1-.483.082h-.563zm3.743 1.763v1.591h-.79V11.85h2.548v.653H7.896v1.117h1.606v.638z" />
                      </svg>
                    </a>
                  </div>
                  <div *ngSwitchCase="'.txt'">
                    <a class="cursor-pointer" (click)="onPreviewOrDownloadFileClick()"
                       title="Click para descargar">
                      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-filetype-txt" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M14 4.5V14a2 2 0 0 1-2 2h-2v-1h2a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5zM1.928 15.849v-3.337h1.136v-.662H0v.662h1.134v3.337zm4.689-3.999h-.894L4.9 13.289h-.035l-.832-1.439h-.932l1.228 1.983-1.24 2.016h.862l.853-1.415h.035l.85 1.415h.907l-1.253-1.992zm1.93.662v3.337h-.794v-3.337H6.619v-.662h3.064v.662H8.546Z" />
                      </svg>
                    </a>
                  </div>

                </div>
              </ng-template>
            </td>
            <ng-template #elseBlock>
              <td>-</td>
            </ng-template>
          </ng-container>
          <td>
            <button id="btnAvanceEstatus" style="border:none; text-align:right"
                    title="Filtros" aria-expanded="false" (click)="mostrarAvance(replica.estatusResultadoId, replica.claveUnica)">
              <i class="bi bi-caret-right-fill"></i>

            </button>
          </td>
          <td>{{replica.claveUnica}}</td>
          <td *ngFor="let estatus of this.estatusReplicas" id="tdEstatus{{estatus}}{{replica.claveUnica}}"  ></td>    

        </tr>
        <tr *ngIf="this.replicasResultados.length==0">
          <td class="td-center" colspan="22">No se encontraron registros</td>
        </tr>
      </tbody>
    </table>

    <div class="row">
      <div class="col-md-6 align-self-end">
        <button id="btnMdlConfirmacion" class="btn btn-primary element-hidden" type="button" data-toggle="modal"
                data-target="#mdlCorreo" title="Seleccionar"></button>
      </div>
    </div>
  </div>
  <app-correo [correo]="this.envioCorreo" (changed)="this.enviarCorreo();"></app-correo>
</div>

